# reversi_lab_project

# 黑白棋

## 实验说明

1. [黑白棋的规则](https://baike.baidu.com/item/黑白棋/80689)

2. 游戏有两名 AI 玩家（由两份代码控制下棋）
- 机器人 AI

- 你的 AI
3. 实验任务
   你需要在 `player.h` 文件中编写 `struct Point place(struct Player *player);` 函数，你的 AI 程序会在你的回合中根据此函数决策落子的位置。当一方本回合无可落子位置时，返回 `-1 -1` 表示放弃本回合。

### 游戏规则

在经典 [黑白棋](https://baike.baidu.com/item/黑白棋/80689) 规则的基础之上，增加一个额外信息：棋子分数。对于棋盘上的每个格子，均有一个 $1$ 至 $9$ 之间的分数，格子上的分数属于格子上的棋子所属人。

对于你的 AI，己方棋子在棋盘上用大写`O`表示，对方棋子用小写`o`表示。

初始每个人的棋子所在格子的分数为 $0$，其余可通过 `mat` 初始时的值得到。

当一方本回合无可落子位置时，返回 `-1 -1` 表示放弃本回合。

如果移动不合法（包含移动到不合法位置、在不必须放弃的回合直接放弃等），则分数直接记为 $−100$。

## Missions

### 任务一

地图中所有格子**除了中间四个**以外的分数均为 $1$。

程序编译通过可以获得基础 $10$ 分。

给定三张地图在`data/map*.txt`中可以查看，对手 AI 代码可以在`code/computer.h`中查看。对于每张地图会与对手 AI 对战两次，若总分大于对手，则该张图获得 $30$ 分，否则不得分。

> 如果对战的时候，将对手的棋子吃完，则当前回合的计分规则：
> 
> - 当前分数 $≥$ 棋盘总分 $\times$ $\frac{3}{4}$ ，则本局分数为：当前分数 $+bonus$；（棋盘大小 $8×8,10×10$ 时 $bonus=10$；$12×12$ 时，$bonus=20$）
> - 当前分数 $<$ 棋盘总分 $× \frac{3}{4}$，则本局分数为：棋盘总分 $× \frac{3}{4}$。

### 任务二

地图中所有格子**除了中间四个以及四个角**以外的分数均为 $1$。

给定四张地图在`data/map*.txt`中可以查看，对手 AI 代码可以在`code/computer.h`中查看。对于每张地图会与对手 AI 对战两次，若总分大于对手，则该张图获得 $25$ 分，否则不得分。

> 如果对战的时候，将对手的棋子吃完，则当前回合的计分规则：
> 
> - 当前分数 $≥$ 棋盘总分 $\times$ $\frac{3}{4}$ ，则本局分数为：当前分数 $+bonus$；（棋盘大小 $8×8,10×10$ 时 $bonus=10$；$12×12$ 时，$bonus=20$）
> - 当前分数 $<$ 棋盘总分 $× \frac{3}{4}$，则本局分数为：棋盘总分 $× \frac{3}{4}$。

### 任务三

地图中所有格子**除了中间四个以及最外层一圈**以外的格子分数均为 $1$。

给定四张地图在`data/map*.txt`中可以查看，对手 AI 代码可以在`code/computer.h`中查看。对于每张地图会与对手 AI 对战两次，若总分大于对手，则该张图获得 $25$ 分，否则不得分。

> 如果对战的时候，将对手的棋子吃完，则当前回合的计分规则：
> 
> - 当前分数 $≥$ 棋盘总分 $\times$ $\frac{3}{4}$ ，则本局分数为：当前分数 $+bonus$；（棋盘大小 $8×8,10×10$ 时 $bonus=10$；$12×12$ 时，$bonus=20$）
> - 当前分数 $<$ 棋盘总分 $× \frac{3}{4}$，则本局分数为：棋盘总分 $× \frac{3}{4}$。

### 任务四

地图中**除了中间四个格子**以外的其余格子的分数范围为 $1∼9$。

给定四张地图在`data/map*.txt`中可以查看，对手 AI 代码可以在`code/computer.h`中查看。对于每张地图会与对手 AI 对战两次，若总分大于对手，则该张图获得 $25$ 分，否则不得分。

> 如果对战的时候，将对手的棋子吃完，则当前回合的计分规则：
> 
> - 当前分数 $≥$ 棋盘总分 $\times$ $\frac{3}{4}$ ，则本局分数为：当前分数 $+bonus$；（棋盘大小 $8×8,10×10$ 时 $bonus=10$；$12×12$ 时，$bonus=20$）
> - 当前分数 $<$ 棋盘总分 $× \frac{3}{4}$，则本局分数为：棋盘总分 $× \frac{3}{4}$。

### PlayerBase 结构体

```c
struct Player {
    char **mat;  // Game Data
​
    int row_cnt;  // Count of rows in current map
​
    int col_cnt;  // Count of columns in current map
​
    int your_score;  // Your AI's score
​
    int opponent_score;  // Opponent AI's score

};
​
struct Point place(struct Player *player);  // Place function which you need to implement
​
void init(struct Player *player);  // Init function which you need to implement

```

### 测试运行

执行`./run.sh`脚本即可测试。可以在`logs`目录内查看游戏过程和最终分数。

可以执行`./run.sh --visible`进行可视化测试。

可以将要测试的地图内容复制到`data/map.txt`中进行测试。

### 时间限制

- 初始化的时间限制为 $1$ s。
- 每回合移动的计算时间限制为 $100$ ms。
- 若回合移动的计算超时，则系统会认为此次不移动。

### 空间限制

空间限制为 $512$ MB，于最终评测时进行限制。

### 函数调用限制

以下系统调用及函数禁止使用

- 新建进程（调用fork）
- 禁止读写文件
- 禁止调用`PlayerBase`类的`_recv`、`_send`、`_work`、`_init_thread`、`_walk_thread`、`_syscall_check`方法。

### 程序异常处理

若 AI 进程在某次`place`计算时异常退出，则系统会认为该 AI 失败，游戏结束。

# 

## 策略

应该尽量争取角落（因为不会被翻转），避免别人占据角落（不下距离角落最近的三个格子），以此扩大优势。
